#include <stdint.h>
uint8_t data_array[] =
{
        0x2E, 0x06, 0x7D, 0x3C, 0x1F, 0x42, 0xAE, 0x39, 0xCE, 0x0F, 0x1E, 0x53,
        0x82, 0x4E, 0xAE, 0x39, 0x4F, 0x0E, 0x4F, 0x0D, 0x00, 0x18, 0x5F, 0x52,
        0xA6, 0x39, 0xE2, 0x4F, 0x2E, 0x06, 0x6F, 0x3C, 0x00, 0x18, 0xC2, 0x93,
        0xAA, 0x39, 0x04, 0x20, 0xD2, 0x42, 0x2C, 0x06, 0xB0, 0x39, 0x67, 0x3C,
        0x1F, 0x42, 0xAE, 0x39, 0xCE, 0x0F, 0x1E, 0x53, 0x82, 0x4E, 0xAE, 0x39,
        0x4F, 0x0E, 0x4F, 0x0D, 0x00, 0x18, 0x5F, 0x52, 0xAA, 0x39, 0xDF, 0x42,
        0x2C, 0x06, 0x00, 0x00, 0x58, 0x3C, 0xF2, 0xC2, 0x3D, 0x06, 0x5F, 0x42,
        0x94, 0x39, 0x1F, 0x83, 0x08, 0x24, 0x1F, 0x83, 0x0B, 0x20, 0x1C, 0x42,
        0xAE, 0x39, 0x4D, 0x43, 0x80, 0x13, 0x9A, 0x39, 0x05, 0x3C, 0x1C, 0x42,
        0xAE, 0x39, 0x4D, 0x43, 0x80, 0x13, 0x96, 0x39, 0xC2, 0x43, 0x94, 0x39,
        0x42, 0x3C, 0xE2, 0xC2, 0x3D, 0x06, 0x5F, 0x42, 0x94, 0x39, 0x1F, 0x83,
        0x0E, 0x24, 0x1F, 0x83, 0x17, 0x20, 0xF2, 0xB0, 0x10, 0x00, 0x20, 0x06,
        0x02, 0x20, 0x5D, 0x43, 0x01, 0x3C, 0x6D, 0x43, 0x1C, 0x42, 0xAE, 0x39,
        0x80, 0x13, 0x9A, 0x39, 0x0B, 0x3C, 0xF2, 0xB0, 0x10, 0x00, 0x20, 0x06,
        0x02, 0x20, 0x5D, 0x43, 0x01, 0x3C, 0x6D, 0x43, 0x1C, 0x42, 0xAE, 0x39,
        0x80, 0x13, 0x96, 0x39, 0xF2, 0xB0, 0x10, 0x00, 0x20, 0x06, 0x1B, 0x24,
        0x00, 0x18, 0xC2, 0x93, 0xA6, 0x39, 0x05, 0x20, 0xC2, 0x43, 0x94, 0x39,
        0xF2, 0xD2, 0x20, 0x06, 0x16, 0x3C, 0xE2, 0x43, 0x94, 0x39, 0x82, 0x43,
        0xAE, 0x39, 0x1F, 0x42, 0xAE, 0x39, 0xCE, 0x0F, 0x1E, 0x53, 0x82, 0x4E,
        0xAE, 0x39, 0x4F, 0x0E, 0x4F, 0x0D, 0x00, 0x18, 0x5F, 0x52, 0xA6, 0x39,
        0xE2, 0x4F, 0x2E, 0x06, 0x04, 0x3C, 0xD2, 0x43, 0x94, 0x39, 0x82, 0x43,
        0xAE, 0x39, 0x00, 0x18, 0xC2, 0x93, 0x9E, 0x39, 0x08, 0x24, 0x2C, 0x00,
        0x9E, 0x39, 0x1D, 0x42, 0xA2, 0x39, 0x1E, 0x42, 0xA4, 0x39, 0xB1, 0x13,
        0x62, 0x74, 0xB1, 0xC0, 0xF0, 0x00, 0x14, 0x00, 0x4B, 0x16, 0x00, 0x13,
        0x1F, 0x14, 0x1F, 0x42, 0xFE, 0x05, 0x2F, 0x82, 0x58, 0x24, 0x3F, 0x80,
        0x06, 0x00, 0x3D, 0x24, 0x2F, 0x83, 0x57, 0x20, 0xE2, 0xC3, 0xFD, 0x05,
        0x1F, 0x42, 0xDE, 0x39, 0x1F, 0x83, 0x1E, 0x24, 0x1F, 0x83, 0x4F, 0x20,
        0xC2, 0x93, 0xE1, 0x39, 0x13, 0x24, 0x82, 0x93, 0xE6, 0x39, 0x05, 0x20,
        0x82, 0x43, 0xDE, 0x39, 0xE2, 0xD2, 0xE0, 0x05, 0x44, 0x3C, 0x2F, 0x00,
        0xE2, 0x39, 0x6F, 0x4F, 0x00, 0x18, 0xD2, 0x53, 0xE2, 0x39, 0x92, 0x83,
        0xE6, 0x39, 0xC2, 0x4F, 0xEE, 0x05, 0x39, 0x3C, 0xD2, 0x43, 0xE1, 0x39,
        0xD2, 0x42, 0xE0, 0x39, 0xEE, 0x05, 0x33, 0x3C, 0xC2, 0x93, 0xE1, 0x39,
        0x80, 0x13, 0x9A, 0x39, 0x0B, 0x3C, 0xF2, 0xB0, 0x10, 0x00, 0x20, 0x06,
        0x02, 0x20, 0x5D, 0x43, 0x01, 0x3C, 0x6D, 0x43, 0x1C, 0x42, 0xAE, 0x39,
        0x80, 0x13, 0x96, 0x39, 0xF2, 0xB0, 0x10, 0x00, 0x20, 0x06, 0x1B, 0x24,
        0x00, 0x18, 0xC2, 0x93, 0xA6, 0x39, 0x05, 0x20, 0xC2, 0x43, 0x94, 0x39,
        0xF2, 0xD2, 0x20, 0x06, 0x16, 0x3C, 0xE2, 0x43, 0x94, 0x39, 0x82, 0x43,
        0xAE, 0x39, 0x1F, 0x42, 0xAE, 0x39, 0xCE, 0x0F, 0x1E, 0x53, 0x82, 0x4E,
        0xAE, 0x39, 0x4F, 0x0E, 0x4F, 0x0D, 0x00, 0x18, 0x5F, 0x52, 0xA6, 0x39,
        0xE2, 0x4F, 0x2E, 0x06, 0x04, 0x3C, 0xD2, 0x43, 0x94, 0x39, 0x82, 0x43,
        0xAE, 0x39, 0x00, 0x18, 0xC2, 0x93, 0x9E, 0x39, 0x08, 0x24, 0x2C, 0x00,
        0x9E, 0x39, 0x1D, 0x42, 0xA2, 0x39, 0x1E, 0x42, 0xA4, 0x39, 0xB1, 0x13,
        0x62, 0x74, 0xB1, 0xC0, 0xF0, 0x00, 0x14, 0x00, 0x4B, 0x16, 0x00, 0x13,
        0x1F, 0x14, 0x1F, 0x42, 0xFE, 0x05, 0x2F, 0x82, 0x58, 0x24, 0x3F, 0x80,
        0x06, 0x00, 0x3D, 0x24, 0x2F, 0x83, 0x57, 0x20, 0xE2, 0xC3, 0xFD, 0x05,
        0x1F, 0x42, 0xDE, 0x39, 0x1F, 0x83, 0x1E, 0x24, 0x1F, 0x83, 0x4F, 0x20,
        0xC2, 0x93, 0xE1, 0x39, 0x13, 0x24, 0x82, 0x93, 0xE6, 0x39, 0x05, 0x20,
        0x82, 0x43, 0xDE, 0x39, 0xE2, 0xD2, 0xE0, 0x05, 0x44, 0x3C, 0x2F, 0x00,
        0xE2, 0x39, 0x6F, 0x4F, 0x00, 0x18, 0xD2, 0x53, 0xE2, 0x39, 0x92, 0x83,
        0xE6, 0x39, 0xC2, 0x4F, 0xEE, 0x05, 0x39, 0x3C, 0xD2, 0x43, 0xE1, 0x39,
        0xD2, 0x42, 0xE0, 0x39, 0xEE, 0x05, 0x33, 0x3C, 0xC2, 0x93, 0xE1, 0x39,
        0x80, 0x13, 0x9A, 0x39, 0x0B, 0x3C, 0xF2, 0xB0, 0x10, 0x00, 0x20, 0x06,
        0x02, 0x20, 0x5D, 0x43, 0x01, 0x3C, 0x6D, 0x43, 0x1C, 0x42, 0xAE, 0x39,
        0x80, 0x13, 0x96, 0x39, 0xF2, 0xB0, 0x10, 0x00, 0x20, 0x06, 0x1B, 0x24,
        0x00, 0x18, 0xC2, 0x93, 0xA6, 0x39, 0x05, 0x20, 0xC2, 0x43, 0x94, 0x39,
        0xF2, 0xD2, 0x20, 0x06, 0x16, 0x3C, 0xE2, 0x43, 0x94, 0x39, 0x82, 0x43,
        0xAE, 0x39, 0x1F, 0x42, 0xAE, 0x39, 0xCE, 0x0F, 0x1E, 0x53, 0x82, 0x4E,
        0xAE, 0x39, 0x4F, 0x0E, 0x4F, 0x0D, 0x00, 0x18, 0x5F, 0x52, 0xA6, 0x39,
        0xE2, 0x4F, 0x2E, 0x06, 0x04, 0x3C, 0xD2, 0x43, 0x94, 0x39, 0x82, 0x43,
        0xAE, 0x39, 0x00, 0x18, 0xC2, 0x93, 0x9E, 0x39, 0x08, 0x24, 0x2C, 0x00,
        0x9E, 0x39, 0x1D, 0x42, 0xA2, 0x39, 0x1E, 0x42, 0xA4, 0x39, 0xB1, 0x13,
        0x62, 0x74, 0xB1, 0xC0, 0xF0, 0x00, 0x14, 0x00, 0x4B, 0x16, 0x00, 0x13,
        0x1F, 0x14, 0x1F, 0x42, 0xFE, 0x05, 0x2F, 0x82, 0x58, 0x24, 0x3F, 0x80,
        0x06, 0x00, 0x3D, 0x24, 0x2F, 0x83, 0x57, 0x20, 0xE2, 0xC3, 0xFD, 0x05,
        0x1F, 0x42, 0xDE, 0x39, 0x1F, 0x83, 0x1E, 0x24, 0x1F, 0x83, 0x4F, 0x20,
        0xC2, 0x93, 0xE1, 0x39, 0x13, 0x24, 0x82, 0x93, 0xE6, 0x39, 0x05, 0x20,
        0x82, 0x43, 0xDE, 0x39, 0xE2, 0xD2, 0xE0, 0x05, 0x44, 0x3C, 0x2F, 0x00,
        0xE2, 0x39, 0x6F, 0x4F, 0x00, 0x18, 0xD2, 0x53, 0xE2, 0x39, 0x92, 0x83,
        0xE6, 0x39, 0xC2, 0x4F, 0xEE, 0x05, 0x39, 0x3C, 0xD2, 0x43, 0xE1, 0x39,
        0xD2, 0x42, 0xE0, 0x39, 0xEE, 0x05, 0x33, 0x3C, 0xC2, 0x93, 0xE1, 0x39,
        0x80, 0x13, 0x9A, 0x39, 0x0B, 0x3C, 0xF2, 0xB0, 0x10, 0x00, 0x20, 0x06,
        0x02, 0x20, 0x5D, 0x43, 0x01, 0x3C, 0x6D, 0x43, 0x1C, 0x42, 0xAE, 0x39,
        0x80, 0x13, 0x96, 0x39, 0xF2, 0xB0, 0x10, 0x00, 0x20, 0x06, 0x1B, 0x24,
        0x00, 0x18, 0xC2, 0x93, 0xA6, 0x39, 0x05, 0x20, 0xC2, 0x43, 0x94, 0x39,
        0xF2, 0xD2, 0x20, 0x06, 0x16, 0x3C, 0xE2, 0x43, 0x94, 0x39, 0x82, 0x43,
        0xAE, 0x39, 0x1F, 0x42, 0xAE, 0x39, 0xCE, 0x0F, 0x1E, 0x53, 0x82, 0x4E,
        0xAE, 0x39, 0x4F, 0x0E, 0x4F, 0x0D, 0x00, 0x18, 0x5F, 0x52, 0xA6, 0x39,
        0xE2, 0x4F, 0x2E, 0x06, 0x04, 0x3C, 0xD2, 0x43, 0x94, 0x39, 0x82, 0x43,
        0xAE, 0x39, 0x00, 0x18, 0xC2, 0x93, 0x9E, 0x39, 0x08, 0x24, 0x2C, 0x00,
        0x9E, 0x39, 0x1D, 0x42, 0xA2, 0x39, 0x1E, 0x42, 0xA4, 0x39, 0xB1, 0x13,
        0x62, 0x74, 0xB1, 0xC0, 0xF0, 0x00, 0x14, 0x00, 0x4B, 0x16, 0x00, 0x13,
        0x1F, 0x14, 0x1F, 0x42, 0xFE, 0x05, 0x2F, 0x82, 0x58, 0x24, 0x3F, 0x80,
        0x06, 0x00, 0x3D, 0x24, 0x2F, 0x83, 0x57, 0x20, 0xE2, 0xC3, 0xFD, 0x05,
        0x1F, 0x42, 0xDE, 0x39, 0x1F, 0x83, 0x1E, 0x24, 0x1F, 0x83, 0x4F, 0x20,
        0xC2, 0x93, 0xE1, 0x39, 0x13, 0x24, 0x82, 0x93, 0xE6, 0x39, 0x05, 0x20,
        0xCA, 0xFE, 0xBE, 0xEF
};

#include "sysinit.h"
#include "usart.h"
#include "delay.h"

/* Statics */
static bool isFinished;
static uint8_t destinationArray[1024];
uint8_t controlTable[1024];

int main(void)
{
	MAP_WDT_A_holdTimer();
	
	SysInit();		   //第3讲 时钟配置
	delay_init();
	uart_init(115200); //第7讲 串口实验

	
	memset(destinationArray, 0x00, 1024);
	
	isFinished = false;
	
	
	printf("Integer        %d\r\n", destinationArray[100]);
	
	
	MAP_DMA_enableModule();
  MAP_DMA_setControlBase(controlTable);
	
	MAP_DMA_setChannelControl(DMA_CH0_RESERVED0 | UDMA_PRI_SELECT,
				UDMA_SIZE_8 | UDMA_SRC_INC_8 | UDMA_DST_INC_8 | UDMA_ARB_1024);

	MAP_DMA_setChannelTransfer(DMA_CH0_RESERVED0 | UDMA_PRI_SELECT, UDMA_MODE_AUTO, data_array,
					destinationArray, 1024);

	/* Assigning/Enabling Interrupts */
	MAP_DMA_assignInterrupt(DMA_INT1, 0);
	MAP_Interrupt_enableInterrupt(INT_DMA_INT1);
	MAP_Interrupt_disableSleepOnIsrExit();

	/* Enabling DMA Channel 0 */
	MAP_DMA_enableChannel(0);

	/* Forcing a software transfer on DMA Channel 0 */
	MAP_DMA_requestSoftwareTransfer(0);
	
	
	printf("Integer        %d\r\n", data_array[100]);
	printf("Integer        %d\r\n", data_array[101]);
	printf("Integer        %d\r\n", data_array[102]);
	


	int t = 0;
	while (1)
	{

			
	delay_ms(1000);
	printf("Integer        %d\r\n", data_array[100]);
	printf("Integer        %d\r\n", data_array[101]);
	printf("Integer        %d\r\n", data_array[102]);
	printf("\r\n");	
	}
}




